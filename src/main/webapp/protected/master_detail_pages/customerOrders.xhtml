<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <h:outputStylesheet library="css" name="style.css"/>
    <title>Customer orders details</title>
</h:head>
<h:body>
    <div class="o-page-wrapper">
        <f:metadata>
            <f:viewParam name="customerId" value="#{customerOrdersView.customerId}" />
            <f:viewAction action="#{customerOrdersView.init()}" />
        </f:metadata>
        <div class="o_button-wrapper">
            <div class="o-nav_button-wrapper">
                <h:button value="Return to customers list" outcome="/protected/master_pages/customers.xhtml"
                          styleClass="c-button u-spacing-out-right--xsmall"/>
                <h:button value="Return to dashboard" outcome="/protected/dashboard.xhtml" styleClass="c-button"/>
            </div>
            <h:form>
                <h:commandButton value="Logout" action="#{authentication.invalidate()}" styleClass="c-button"/>
            </h:form>
        </div>
        <h1>#{customerOrdersView.customer.firstName} #{customerOrdersView.customer.lastName} orders </h1>

        <div class="c-table-legend">
            <h:outputText value="Total number of orders: #{customerOrdersView.allOrdersSize}" />
        </div>
        <h:dataTable value="#{customerOrdersView.ordersList}" styleClass="c-table" var="order">

            <h:column>
                <f:facet name="header">Order serial number</f:facet>
                <h:outputText value="#{order.orderId}" />
            </h:column>
            <h:column>
                <f:facet name="header">Order date</f:facet>
                <h:outputText value="#{order.orderDate}" converter="localDateConverter" />
            </h:column>
            <h:column>
                <f:facet name="header">Required date</f:facet>
                <h:outputText value="#{order.requiredDate}" converter="localDateConverter" />
            </h:column>
            <h:column>
                <f:facet name="header">Shipped date</f:facet>
                <h:outputText value="#{order.shippedDate}" converter="localDateConverter" />
            </h:column>
            <h:column>
                <f:facet name="header">Order  Status</f:facet>
                <h:outputText value="#{order.orderStatus.getName()}" />
            </h:column>
            <h:column>
                <f:facet name="header">Details</f:facet>
                <h:button value="More infos" outcome="/protected/master_detail_pages/customerOrderDetails.xhtml" includeViewParams="false" styleClass="c-button">
                    <f:param name="orderId" value="#{order.orderId}" />
                    <f:param name="customerId" value="#{order.customer.customerId}"/>
                </h:button>
            </h:column>
        </h:dataTable>
    </div>
</h:body>
</html>
