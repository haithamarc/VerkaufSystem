<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      lang="EN">
<h:head>
    <title>select Customer</title>
    <h:outputStylesheet library="css" name="style.css"/>
</h:head>
<body>
    <div class="o-page-wrapper">
                <div class="o_button-wrapper">
                    <h:button value="Cancel Ordering" outcome="/protected/master_pages/orders.xhtml" styleClass="c-button"/>
                </div>
                <h1 id="customers_list">Select a Customer to order for : </h1>
                <h:form styleClass="c-filter">
                    <div class="c-filter__title">Filters</div>
                    <h:selectOneMenu id="chooseFilter" value="#{customerView.dropdownValue}" class="c-select">
                        <f:selectItem itemValue="#{null}" itemLabel="-- Select Attribute --" itemDisabled="#{not customerView.disableFilterField()}"/>
                        <f:selectItems id="items" value="#{customerView.filterItems}"/>
                        <f:ajax execute="@form" render="@form:filter inputField"/>
                    </h:selectOneMenu>
                    <h:inputText id="inputField" value="#{customerView.attributeValue}" styleClass="u-spacing-out-left--xsmall" disabled="#{customerView.disableFilterField()}">
                        <f:ajax event="keyup" render="filter"/>
                    </h:inputText>
                    <h:outputText styleClass="error-message" value="#{customerView.errorMessage}"/>
                    <div class="c-filter__button-wrapper">
                        <h:commandButton id="filter" value="Filter" action="#{customerView.refreshCustomers(true)}" styleClass="c-button" disabled="#{customerView.disableFilterButton()}"/>
                        <h:commandButton value="Reset" action="#{customerView.resetFilter()}" styleClass="c-button u-spacing-out-left--xsmall"/>
                    </div>
                </h:form>
                <h:form>
                    <h:panelGroup style="margin: 1rem" class="form-group c-pagination" id="pagination">
                        <h:panelGroup class="c-pagination__wrapper"
                                      rendered="#{not (customerView.getTotalPageCount() eq 1)}">
                            <div class="c-pagination__buttons-wrapper">
                                <h:commandButton styleClass="c-pagination__button c-button"
                                                 rendered="#{not (customerView.getTotalPageCount() le 11)}"
                                                 disabled="#{customerView.currentPage eq 1}" value="Start"
                                                 action="#{customerView.refreshElementsPage}"
                                                 actionListener="#{customerView.firstPage()}"
                                />
                                <h:commandButton styleClass="c-pagination__button c-button"
                                                 rendered="#{not (customerView.getTotalPageCount() le 1)}"
                                                 disabled="#{customerView.currentPage eq 1}" value="Prev"
                                                 action="#{customerView.refreshElementsPage}"
                                                 actionListener="#{customerView.prevPage()}"
                                />
                            </div>
                            <ui:repeat id="pagination-links" value="#{customerView.getPageNumbers()}" var="page">
                                <h:commandLink value="#{page}" class="c-pagination__link"
                                               action="#{customerView.refreshElementsPage}"
                                               actionListener="#{customerView.setCurrentPage(page)}"
                                               rendered="#{customerView.currentPage != page}"
                                />
                                <h:outputText class="c-pagination__current-page" value="#{page}" escape="false"
                                              rendered="#{page == customerView.currentPage}"
                                />
                            </ui:repeat>
                            <div class="c-pagination__buttons-wrapper">
                                <h:commandButton styleClass="c-pagination__button c-button"
                                                 rendered="#{not (customerView.getTotalPageCount() le 1)}"
                                                 disabled="#{customerView.currentPage eq customerView.getTotalPageCount()}"
                                                 value="Next" action="#{customerView.refreshElementsPage}"
                                                 actionListener="#{customerView.nextPage()}"
                                />
                                <h:commandButton styleClass="c-pagination__button c-button"
                                                 rendered="#{not (customerView.getTotalPageCount() le 11)}"
                                                 disabled="#{customerView.currentPage eq customerView.getTotalPageCount()}"
                                                 value="End" action="#{customerView.refreshElementsPage}"
                                                 actionListener="#{customerView.lastPage()}"
                                />
                            </div>
                        </h:panelGroup>
                    </h:panelGroup>
                    <div class="c-section u-spacing-out-top-bottom--small u-flex-row">
                        <label class="">Customers per page: </label>
                        <div class="u-spacing-out-left--xsmall">
                            <h:selectOneMenu id="itemsPerPage" class="c-select" value="#{customerView.itemsPerPage}">
                                <f:ajax render="customersTablepanel pagination" listener="#{customerView.resetElementsPage}"/>
                                <f:selectItem itemLabel="5" itemValue="#{5}"/>
                                <f:selectItem itemLabel="10" itemValue="#{10}"/>
                                <f:selectItem itemLabel="25" itemValue="#{25}"/>
                                <f:selectItem itemLabel="50" itemValue="#{50}"/>
                            </h:selectOneMenu>
                        </div>
                    </div>
                </h:form>
                <h:panelGroup id="customersTablepanel" class="table-responsive">
                <div class="c-table-legend">
                    <h:outputText value="Total number of customers: #{customerView.refreshSize()}" />
                </div>
                <h:form id="select_customer_form">
                <h:dataTable id="customersTable" value="#{customerView.filteredCustomers}" styleClass="c-table" var="customer">
                    <h:column>
                        <f:facet name="header">Id</f:facet>
                        <h:outputText value="#{customer.customerId}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Name</f:facet>
                        <h:outputText value="#{customer.firstName}, #{customer.lastName}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Email</f:facet>
                        <h:outputText value="#{customer.email}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Phone</f:facet>
                        <h:outputText value="#{customer.phone}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Adress</f:facet>
                        <h:outputText
                                value="#{customer.street}, #{customer.zipCode} #{customer.city} #{customer.state}"/>
                    </h:column>

                        <h:column>
                            <f:facet class="table_header" name="header"/>
                            <h:commandButton id="choose_customer" styleClass="c-button" value="make order for this customer" actionListener="#{createOrderView.selectCustomer(customer)}"/>
                        </h:column>

                </h:dataTable>
                </h:form>
                </h:panelGroup>
            </div>
        </body>
</html>
